(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,n){e.exports=n(36)},33:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),s=n(4),u=n(22),i=n(7),l=n.n(i),m=n(11),p=(n(33),n(17)),f=n(12),d="https://jsonplaceholder.typicode.com",E=function(){var e=Object(m.a)(l.a.mark((function e(){var t,n,r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fetch("".concat(d,"/posts")).then((function(e){return e.json()})),fetch("".concat(d,"/comments")).then((function(e){return e.json()})),fetch("".concat(d,"/users")).then((function(e){return e.json()}))]);case 2:return t=e.sent,n=Object(f.a)(t,3),r=n[0],a=n[1],c=n[2],o=r.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{user:c.find((function(t){return t.id===e.userId})),comments:a.filter((function(t){return t.postId===e.id}))})})),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){return{type:"SUCCESSFUL_LOADING",posts:e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING_DATA":return!0;case"SUCCESSFUL_LOADING":return!1;case"HANDLER_ERROR_LOADING":return!0;default:return e}},b=function(){return{type:"HANDLER_ERROR_LOADING"}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLER_ERROR_LOADING":return!0;default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;default:return e}},y=function(e){var t=e.user;return a.a.createElement("div",{className:"post__author"},a.a.createElement("span",{className:"post__author-name"},t.name),a.a.createElement("a",{href:"link",className:"post__author-email"},t.email),a.a.createElement("span",{className:"post__author-address"},"".concat(t.address.street," ").concat(t.address.suite," ").concat(t.address.city)))},N=(n(34),function(e){var t=e.comment;return a.a.createElement("section",{className:"post__comment"},a.a.createElement("p",{className:"post__comment-body"},t.body),a.a.createElement("div",{className:"post__comment-author"},a.a.createElement("a",{href:"/",className:"post__comment-author-email"},t.email),a.a.createElement("span",{className:"post__comment-author-name"},t.name)))}),j=function(e){var t=e.comments;return a.a.createElement("section",{className:"post__comments-section"},a.a.createElement("h3",{className:"post__comments-title"},"Comments:"),t.map((function(e){return a.a.createElement(N,{comment:e,key:e.id})})))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESSFUL_LOADING":return t.posts;case"REMOVE_POST":return e.filter((function(e){return e.id!==t.postId}));default:return e}},R=function(e){var t=e.post,n=Object(s.b)();return a.a.createElement("article",{className:"post"},a.a.createElement("button",{type:"button",onClick:function(){return n({type:"REMOVE_POST",postId:t.id})},className:"button"},"Remove"),a.a.createElement("h2",{className:"post__title"},t.title),a.a.createElement("p",{className:"post__text"},t.body),a.a.createElement(y,{user:t.user}),a.a.createElement(j,{comments:t.comments}))},A=function(){var e=Object(s.c)((function(e){return e.posts})),t=function(e,t){var n=Object(r.useState)(e),a=Object(f.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(Object(s.c)((function(e){return e.query})),1e3),n=Object(r.useCallback)((function(){var n=t.toLowerCase();return e.filter((function(e){return(e.body+e.title).toLowerCase().includes(n)}))}),[e,t]),c=Object(r.useMemo)((function(){return n()}),[n]);return a.a.createElement("div",{className:"container"},c.map((function(e){return a.a.createElement(R,{post:e,key:e.id})})))},S=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.posts})),n=Object(s.c)((function(e){return e.isLoading})),r=Object(s.c)((function(e){return e.hasErrors})),c=function(){var t=Object(m.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:"START_LOADING_DATA"}),t.next=4,E();case 4:n=t.sent,e(h(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e(b);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Dynamic list of posts"),r&&a.a.createElement("h1",null,"Some errors appeared. Please, try again"),0===t.length?a.a.createElement("button",{type:"button",onClick:c,disabled:n,className:"button"},n?"Loading...":"Load"):a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{type:"text",onChange:function(t){var n=t.target.value;e({type:"SET_QUERY",query:n})},placeholder:"search the post"}),a.a.createElement(A,null)))},g=n(6),D=n(21),C=Object(g.combineReducers)({posts:L,isLoading:_,hasErrors:v,query:O}),I=Object(g.createStore)(C,Object(D.composeWithDevTools)()),T=function(){return a.a.createElement(s.a,{store:I},a.a.createElement(u.a,null,a.a.createElement(S,null)))};o.a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.0ba5d274.chunk.js.map