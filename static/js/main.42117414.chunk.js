(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{23:function(e,t,n){e.exports=n(36)},33:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),s=n(3),u=n(22),i=n(7),m=n.n(i),l=n(12),p=(n(33),n(8)),f=n(13),E="https://mate-academy.github.io/react_dynamic-list-of-posts/api/",d=function(){var e=Object(l.a)(m.a.mark((function e(){var t,n,a,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fetch("".concat(E,"/posts")).then((function(e){return e.json()})),fetch("".concat(E,"/comments")).then((function(e){return e.json()})),fetch("".concat(E,"/users")).then((function(e){return e.json()}))]);case 2:return t=e.sent,n=Object(f.a)(t,3),a=n[0],r=n[1],c=n[2],o=a.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{user:c.find((function(t){return t.id===e.userId})),comments:r.filter((function(t){return t.postId===e.id}))})})),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING_DATA":return!0;case"SUCCESSFUL_LOADING":case"HANDLER_ERROR_LOADING":return!1;default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLER_ERROR_LOADING":return!0;case"DISCHARGE_ERROR":return!1;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;default:return e}},O=function(e){var t=e.user;return r.a.createElement("div",{className:"post__author"},r.a.createElement("span",{className:"post__author-name"},t.name),r.a.createElement("a",{href:"link",className:"post__author-email"},t.email),r.a.createElement("span",{className:"post__author-address"},"".concat(t.address.street," ").concat(t.address.suite," ").concat(t.address.city)))},v=(n(34),function(e){return{type:"SET_POSTS",posts:e}}),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return t.posts;case"REMOVE_POST":return e.filter((function(e){return e.id!==t.postId}));case"REMOVE_COMMENT":return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.commentId}))})}));default:return e}},N=function(e){var t=e.comment,n=Object(s.b)();return r.a.createElement("section",{className:"post__comment"},r.a.createElement("button",{type:"button",className:"button button--remove-comment",onClick:function(){return n({type:"REMOVE_COMMENT",commentId:t.id})}},"Remove"),r.a.createElement("p",{className:"post__comment-body"},t.body),r.a.createElement("div",{className:"post__comment-author"},r.a.createElement("a",{href:"/",className:"post__comment-author-email"},t.email),r.a.createElement("span",{className:"post__comment-author-name"},t.name)))},R=function(e){var t=e.comments;return r.a.createElement("section",{className:"post__comments-section"},r.a.createElement("h3",{className:"post__comments-title"},0===t.length?"No Comments Yet":"Comments"),t.map((function(e){return r.a.createElement(N,{comment:e,key:e.id})})))},j=function(e){var t=e.post,n=Object(s.b)();return r.a.createElement("article",{className:"post"},r.a.createElement("button",{type:"button",onClick:function(){return n({type:"REMOVE_POST",postId:t.id})},className:"button"},"Remove"),r.a.createElement("h2",{className:"post__title"},t.title),r.a.createElement("p",{className:"post__text"},t.body),r.a.createElement(O,{user:t.user}),r.a.createElement(R,{comments:t.comments}))},S=function(){var e=Object(s.c)((function(e){return e.posts})),t=function(e,t){var n=Object(a.useState)(e),r=Object(f.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(Object(s.c)((function(e){return e.query})),1e3),n=Object(a.useCallback)((function(){var n=t.toLowerCase();return e.filter((function(e){return(e.body+e.title).toLowerCase().includes(n)}))}),[e,t]),c=Object(a.useMemo)((function(){return n()}),[n]);return r.a.createElement("div",{className:"container"},c.map((function(e){return r.a.createElement(j,{post:e,key:e.id})})))},g=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.posts})),n=Object(s.c)((function(e){return e.isLoading})),a=Object(s.c)((function(e){return e.hasErrors})),c=function(){var t=Object(l.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:"DISCHARGE_ERROR"}),e({type:"START_LOADING_DATA"}),t.next=5,d();case 5:n=t.sent,e(v(n)),e({type:"SUCCESSFUL_LOADING"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e({type:"HANDLER_ERROR_LOADING"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Dynamic list of posts"),a&&r.a.createElement("h1",null,"Some errors appeared. Please, try again"),0===t.length?r.a.createElement("button",{type:"button",onClick:c,disabled:n,className:"button"},n?"Loading...":"Load"):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",onChange:function(t){var n=t.target.value;e({type:"SET_QUERY",query:n})},placeholder:"search the post"}),r.a.createElement(S,null)))},A=n(6),T=n(21),L=Object(A.combineReducers)({posts:y,isLoading:_,hasErrors:h,query:b}),C=Object(A.createStore)(L,Object(T.composeWithDevTools)()),D=function(){return r.a.createElement(s.a,{store:C},r.a.createElement(u.a,null,r.a.createElement(g,null)))};o.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.42117414.chunk.js.map