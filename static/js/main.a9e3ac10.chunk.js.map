{"version":3,"sources":["helpers/api.ts","store/loading.ts","store/actionTypes.ts","store/errors.ts","store/query.ts","components/User.tsx","store/posts.ts","components/Comment.tsx","components/CommentsList.tsx","components/Post.tsx","components/PostsList.tsx","helpers/use-debounce.ts","App.tsx","store/index.ts","index.tsx"],"names":["URL","getPreparedDataFromServer","a","Promise","all","fetch","then","response","json","postsFromServer","commentsFromServer","usersFromServer","preparedPosts","map","post","user","find","id","userId","comments","filter","comment","postId","reducer","loading","action","type","hasErrors","query","User","className","name","href","email","address","street","suite","city","setPosts","data","posts","commentId","Comment","dispatch","useDispatch","onClick","body","CommentsList","length","commentItem","key","Post","title","PostsList","useSelector","state","deboucedValue","searchValue","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","getSortedPosts","useCallback","normalizedQuery","toLowerCase","includes","visiblePosts","useMemo","postItem","App","loadingStatus","isLoading","errorStatus","getData","disabled","onChange","e","searchVal","target","value","placeholder","rootReducer","combineReducers","postsReducer","loadingReducer","errorsReducer","queryReducer","store","createStore","composeWithDevTools","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a9e3ac10.chunk.js","sourcesContent":["const URL = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api';\n\nconst getPostsFromServer = () => {\n  return fetch(`${URL}/posts.json`)\n    .then(response => response.json());\n};\n\nconst getCommentsFromServer = () => {\n  return fetch(`${URL}/comments.json`)\n    .then(response => response.json());\n};\n\nconst getUsersFromServer = () => {\n  return fetch(`${URL}/users.json`)\n    .then(response => response.json());\n};\n\nexport const getPreparedDataFromServer = async () => {\n  const [postsFromServer,\n    commentsFromServer,\n    usersFromServer] = await Promise.all([getPostsFromServer(),\n    getCommentsFromServer(), getUsersFromServer()]);\n\n  const preparedPosts = postsFromServer.map((post: Post) => ({\n    ...post,\n    user: usersFromServer.find((user: User) => user.id === post.userId),\n    comments: commentsFromServer.filter(\n      (comment: Comment) => comment.postId === post.id,\n    ),\n  }));\n\n  return preparedPosts;\n};\n","import { AnyAction } from 'redux';\nimport {\n  START_LOADING_DATA,\n  SUCCESSFUL_LOADING,\n  HANDLE_ERROR_LOADING,\n} from './actionTypes';\n\nexport const startLoadingData = () => ({ type: START_LOADING_DATA });\nexport const handleSuccessfulLoad = () => ({ type: SUCCESSFUL_LOADING });\nexport const hanldeErrorLoad = () => ({ type: HANDLE_ERROR_LOADING });\n\nconst reducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING_DATA:\n      return true;\n    case SUCCESSFUL_LOADING:\n      return false;\n    case HANDLE_ERROR_LOADING:\n      return false;\n    default:\n      return loading;\n  }\n};\n\nexport default reducer;\n","export const START_LOADING_DATA = 'START_LOADING_DATA';\nexport const SET_POSTS = 'SET_POSTS';\nexport const SUCCESSFUL_LOADING = 'SUCCESSFUL_LOADING';\nexport const HANDLE_ERROR_LOADING = 'HANDLER_ERROR_LOADING';\nexport const SET_QUERY = 'SET_QUERY';\nexport const REMOVE_POST = 'REMOVE_POST';\nexport const REMOVE_COMMENT = 'REMOVE_COMMENT';\nexport const DISCHARGE_ERROR = 'DISCHARGE_ERROR';\n","import { AnyAction } from 'redux';\nimport { HANDLE_ERROR_LOADING, DISCHARGE_ERROR } from './actionTypes';\n\nexport const hanldeErrorLoad = () => ({ type: HANDLE_ERROR_LOADING });\nexport const dischargeError = () => ({ type: DISCHARGE_ERROR });\n\nconst reducer = (hasErrors = false, action: AnyAction) => {\n  switch (action.type) {\n    case HANDLE_ERROR_LOADING:\n      return true;\n    case DISCHARGE_ERROR:\n      return false;\n    default:\n      return hasErrors;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\nimport { SET_QUERY } from './actionTypes';\n\nexport const handleSearchQuery = (searchQuery: string) => ({ type: SET_QUERY, query: searchQuery });\n\nconst reducer = (query = '', action: AnyAction) => {\n  switch (action.type) {\n    case SET_QUERY: {\n      return action.query;\n    }\n\n    default:\n      return query;\n  }\n};\n\nexport default reducer;\n","import React from 'react';\n\ntype Props = {\n  user: User;\n};\n\nconst User: React.FunctionComponent<Props> = ({ user }) => {\n  return (\n    <div className=\"post__author\">\n      <span className=\"post__author-name\">{user.name}</span>\n      <a href=\"link\" className=\"post__author-email\">\n        {user.email}\n      </a>\n      <span className=\"post__author-address\">\n        {`${user.address.street} ${user.address.suite} ${user.address.city}`}\n      </span>\n    </div>\n  );\n};\n\nexport default User;\n","import { AnyAction } from 'redux';\nimport { REMOVE_POST, SET_POSTS, REMOVE_COMMENT } from './actionTypes';\n\nexport const setPosts = (data: Post) => ({ type: SET_POSTS, posts: data });\nexport const removePost = (postId: number) => ({ type: REMOVE_POST, postId });\nexport const removeCommentFromPost = (commentId: number) => ({ type: REMOVE_COMMENT, commentId });\n\nconst reducer = (posts = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n    case REMOVE_POST:\n      return posts.filter((post: Post) => post.id !== action.postId);\n    case REMOVE_COMMENT:\n      return posts.map((post: Post) => {\n        return {\n          ...post,\n          comments: post.comments.filter((comment: Comment) => comment.id !== action.commentId),\n        };\n      });\n    default:\n      return posts;\n  }\n};\n\nexport default reducer;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { removeCommentFromPost } from '../store/posts';\n\ntype Props = {\n  comment: Comment;\n};\n\nconst Comment: React.FunctionComponent<Props> = ({ comment }) => {\n  const dispatch = useDispatch();\n\n  return (\n    <section className=\"post__comment\">\n      <button\n        type=\"button\"\n        className=\"button button--remove-comment\"\n        onClick={() => dispatch(removeCommentFromPost(comment.id))}\n      >\n        Remove\n      </button>\n      <p className=\"post__comment-body\">{comment.body}</p>\n      <div className=\"post__comment-author\">\n        <a href=\"/\" className=\"post__comment-author-email\">\n          {comment.email}\n        </a>\n        <span className=\"post__comment-author-name\">{comment.name}</span>\n      </div>\n    </section>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport Comment from './Comment';\n\ntype Props = {\n  comments: Comment[];\n};\n\nconst CommentsList: React.FunctionComponent<Props> = ({ comments }) => {\n  return (\n    <section className=\"post__comments-section\">\n      <h3 className=\"post__comments-title\">{comments.length === 0 ? 'No Comments Yet' : 'Comments'}</h3>\n      {comments.map((commentItem) => (\n        <Comment comment={commentItem} key={commentItem.id} />\n      ))}\n    </section>\n  );\n};\n\nexport default CommentsList;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport User from './User';\nimport './Post.scss';\nimport CommentsList from './CommentsList';\nimport { removePost } from '../store/posts';\n\ntype Props = {\n  post: Post;\n};\n\nconst Post: React.FunctionComponent<Props> = ({ post }) => {\n  const dispatch = useDispatch();\n\n  return (\n    <article className=\"post\">\n      <button\n        type=\"button\"\n        onClick={() => dispatch(removePost(post.id))}\n        className=\"button\"\n      >\n        Remove\n      </button>\n      <h2 className=\"post__title\">{post.title}</h2>\n      <p className=\"post__text\">{post.body}</p>\n      <User user={post.user} />\n      <CommentsList comments={post.comments} />\n    </article>\n  );\n};\n\nexport default Post;\n","import React, { useMemo, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport Post from './Post';\nimport { RootState } from '../store';\nimport { useDebounce } from '../helpers/use-debounce';\n\nconst PostsList: React.FunctionComponent = () => {\n  const posts = useSelector((state: RootState) => state.posts);\n  const searchQuery = useSelector((state: RootState) => state.query);\n  const deboucedValue = useDebounce(searchQuery, 1000);\n\n  const getSortedPosts = useCallback(() => {\n    const normalizedQuery: string = deboucedValue.toLowerCase();\n\n    return posts\n      .filter((post: Post) => (post.body + post.title)\n        .toLowerCase()\n        .includes(normalizedQuery));\n  }, [posts, deboucedValue]);\n\n  const visiblePosts = useMemo(() => getSortedPosts(), [getSortedPosts]);\n\n  return (\n    <div className=\"container\">\n      {visiblePosts.map((postItem: Post) => <Post post={postItem} key={postItem.id} />)}\n    </div>\n  );\n};\n\nexport default PostsList;\n","import { useState, useEffect } from 'react';\n\nexport const useDebounce = (searchValue: string, delay: number) => {\n  const [debouncedValue, setDebouncedValue] = useState(searchValue);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(searchValue);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  },\n  [searchValue, delay]);\n\n  return debouncedValue;\n};\n","import React from 'react';\nimport './App.scss';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getPreparedDataFromServer } from './helpers/api';\nimport { RootState } from './store';\nimport { startLoadingData, handleSuccessfulLoad } from './store/loading';\nimport { hanldeErrorLoad, dischargeError } from './store/errors';\nimport { handleSearchQuery } from './store/query';\nimport PostsList from './components/PostsList';\nimport { setPosts } from './store/posts';\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const posts = useSelector((state: RootState) => state.posts);\n  const loadingStatus = useSelector((state: RootState) => state.isLoading);\n  const errorStatus = useSelector((state: RootState) => state.hasErrors);\n\n  const getData = async () => {\n    try {\n      dispatch(dischargeError());\n      dispatch(startLoadingData());\n      const data = await getPreparedDataFromServer();\n\n      dispatch(setPosts(data));\n      dispatch(handleSuccessfulLoad());\n    } catch {\n      dispatch(hanldeErrorLoad());\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Dynamic list of posts</h1>\n      {errorStatus && <h1>Some errors appeared. Please, try again</h1>}\n      {posts.length === 0 ? (\n        <button\n          type=\"button\"\n          onClick={getData}\n          disabled={loadingStatus}\n          className=\"button\"\n        >\n          {loadingStatus ? 'Loading...' : 'Load'}\n        </button>\n      ) : (\n        <>\n          <input\n            type=\"text\"\n            onChange={(e) => {\n              const searchVal = e.target.value;\n\n              dispatch(handleSearchQuery(searchVal));\n            }}\n            placeholder=\"search the post\"\n          />\n          <PostsList />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import { createStore, combineReducers } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport loadingReducer from './loading';\nimport errorsReducer from './errors';\nimport queryReducer from './query';\nimport postsReducer from './posts';\n\nexport type RootState = {\n  posts: [];\n  isLoading: boolean;\n  hasErrors: boolean;\n  query: string;\n};\n\nconst rootReducer = combineReducers({\n  posts: postsReducer,\n  isLoading: loadingReducer,\n  hasErrors: errorsReducer,\n  query: queryReducer,\n});\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(),\n);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}